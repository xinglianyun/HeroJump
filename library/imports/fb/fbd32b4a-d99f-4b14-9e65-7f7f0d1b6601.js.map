{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\Script\\enemy/assets\\Script\\enemy\\Bird.js"],"names":["cc","Class","extends","Component","properties","flyDownTime","default","type","Float","flyTime","flyToHeroTime","flyVictoryTime","_startSide","Integer","_overScreenX","String","onLoad","_startOffsetY","_targetWorldPos","Vec2","node","y","scheduleOnce","moveBird","getComponent","setRealListener","start","setStartSide","startSide","moveDownAction","moveBy","delayAction","delayTime","moveToHeroPos","parent","convertToNodeSpace","x","Math","abs","moveToHeroAction","moveTo","callfunc","callFunc","target","_gameManager","collectEnemy","sequeenAction","sequence","runAction","setTargetWorldPos","worldPos","setGameManager","gameManager","beVictory","stopAllActions","moveHorizon","beKilled"],"mappings":"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","file":"Bird.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\Script\\enemy","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        flyDownTime : {\r\n            default : 0.5,\r\n            type : cc.Float\r\n        },\r\n        flyTime : {\r\n            default : 1.0,\r\n            type : cc.Float\r\n        },\r\n        flyToHeroTime : {\r\n            default : 5.0,\r\n            type : cc.Float\r\n        },\r\n        flyVictoryTime : {\r\n            default : 0.8,\r\n            type : cc.Float\r\n        },\r\n        _startSide : {\r\n            default : -1, \r\n            type : cc.Integer\r\n        },\r\n        _overScreenX : {\r\n            default : 100.0,\r\n            type : cc.Float\r\n        },\r\n        type : {\r\n            default : \"bird\",\r\n            type : cc.String\r\n        }\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () {\r\n        this._startOffsetY = 100\r\n        this._startSide = -1\r\n        this._targetWorldPos = cc.Vec2(0, 0)\r\n        this.node.y += this._startOffsetY\r\n        this.scheduleOnce(this.moveBird, 0)\r\n\r\n        this.node.getComponent(\"Enemy\").setRealListener(this)\r\n    },\r\n\r\n    start () {\r\n        \r\n    },\r\n\r\n    // update (dt) {},\r\n\r\n    //logic\r\n    setStartSide : function(startSide){\r\n        this._startSide = startSide\r\n    },\r\n\r\n    moveBird : function(){\r\n        var moveDownAction = cc.moveBy(this.flyDownTime, 0, this._startOffsetY * (-1))\r\n        var delayAction = cc.delayTime(this.flyTime)\r\n        var moveToHeroPos = this.node.parent.convertToNodeSpace(this._targetWorldPos)\r\n        moveToHeroPos.x += -this._startSide*this._overScreenX\r\n        moveToHeroPos.y -= (this._overScreenX * Math.abs(this.node.y - moveToHeroPos.y)) / (Math.abs(this.node.x - moveToHeroPos.x))\r\n        var moveToHeroAction = cc.moveTo(this.flyToHeroTime, moveToHeroPos)\r\n        \r\n        var callfunc = cc.callFunc(function(target){\r\n             this._gameManager.collectEnemy(this.node, this.type)\r\n        }, this)\r\n        var sequeenAction = cc.sequence(moveDownAction, delayAction, moveToHeroAction, callfunc)\r\n        this.node.runAction(sequeenAction)\r\n    },\r\n\r\n    setTargetWorldPos : function(worldPos){\r\n        this._targetWorldPos = worldPos\r\n    },\r\n\r\n    setGameManager : function(gameManager){\r\n        this._gameManager = gameManager\r\n    },\r\n\r\n    beVictory : function(){\r\n        this.node.stopAllActions()\r\n        var moveHorizon = cc.moveBy(this.flyVictoryTime, -this._startSide * 200, 0)\r\n        this.node.runAction(moveHorizon)\r\n    },\r\n\r\n    beKilled : function(){\r\n        this.node.stopAllActions()\r\n        this._gameManager.collectEnemy(this.node, this.type)\r\n    }\r\n});\r\n"]}