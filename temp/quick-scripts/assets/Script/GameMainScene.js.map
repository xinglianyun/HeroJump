{"version":3,"sources":["GameMainScene.js"],"names":["cc","Class","extends","Component","properties","heroNode","default","type","Node","leftHeroPosNode","rightHeroPosNode","sideLeft","sideRight","enemyNodeLeft","enemyNodeRight","bottomBG","scoreLabel","Label","_runSpeed","Float","maxSpeed","accSpeed","_startEnemyDistance","_posYInteval","maxPosYInteval","_bottomBGYInteval","_bottomBGScroll","Boolean","_leftOrRight","Integer","_stopCreateEnemy","getRunSpeed","scrollSide","dt","offsetY","y","_distance","Math","abs","string","floor","moveBottomBG","director","getWinSize","height","heroJump","getComponent","setLeftOrRight","jump","offsetX","x","Animation","play","moveAction","moveBy","callfuncAction","callFunc","scaleX","run","action","sequence","runAction","onMouseDown","event","onMouseMove","onMouseUp","onTouchStart","onTouchMove","onTouchEnd","createEnemy","_enemyTimeInteval","timeInteval","_gameManager","getTimeIntevalWithDistance","enemyInfo","generateEnemy","Global","enemyType","bird","dealWithBird","enemyNode","dart2","dealWithDartEnemy","line","dealWithLine","linecat","dealWithLineCat","shortbarrier","dealWithShortBarrier","longbarrier","dealWithLongBarrier","enemyrun","dealWithRunEnemy","circleprop","dealWithCircleProp","birdNode","parent","targetWorldPos","convertToWorldSpace","v2","setStartSide","setTargetWorldPos","dartEnemyNode","lineEnemyNode","linecatEnemyNode","shortBarrierNode","longBarrierNode","runEnemey","circleProp","gameOver","loadScene","onLoad","gameMainScene","node","on","EventType","MOUSE_DOWN","MOUSE_MOVE","MOUSE_UP","TOUCH_START","TOUCH_MOVE","TOUCH_END","start","update"],"mappings":"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","file":"GameMainScene.js","sourceRoot":"../../../../assets/Script","sourcesContent":["/*\n* author:   xinghui\n* desc:     GameMainScene\n*/\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        // 英雄节点\n        heroNode : {\n            default : null,\n            type : cc.Node\n        },\n        // 左侧英雄位置节点\n        leftHeroPosNode : {\n            default : null,\n            type : cc.Node\n        },\n        // 右侧英雄位置节点\n        rightHeroPosNode : {\n            default : null,\n            type : cc.Node\n        },\n        // 左侧墙体：需要移动\n        sideLeft : {\n            default : null,\n            type : cc.Node\n        },\n        // 右侧墙体：需要移动\n        sideRight : {\n            default : null,\n            type : cc.Node\n        },\n        // 左侧敌人节点\n        enemyNodeLeft : {\n            default : null,\n            type : cc.Node\n        },\n        // 右侧敌人节点\n        enemyNodeRight : {\n            default : null,\n            type : cc.Node\n        },\n        // 底部背景装饰\n        bottomBG : {\n            default : null,\n            type : cc.Node\n        },\n        // 分数文字\n        scoreLabel : {\n            default : null,\n            type : cc.Label\n        },\n        // 两侧墙体向下移动速度，负数\n        _runSpeed : {\n            default : 0.0,\n            type : cc.Float\n        },\n        // 最大速度\n        maxSpeed : {\n            default : -250.0,\n            type : cc.Float\n        },\n        // 加速度\n        accSpeed : {\n            default : -100.0,\n            type : cc.Float\n        },\n        // 开始敌人出现逻辑时，移动的距离，从这个距离开始，通过移动距离判断敌人类型和速度\n        _startEnemyDistance : {\n            default : 0.0,\n            type : cc.Float\n        },\n        // 两侧墙向下移动距离，因为两侧墙是循环使用的，当达到一个值时，需要重置墙体位置。\n        _posYInteval : {\n            default : 0.0,\n            type : cc.Float\n        },\n        // 墙体移动此距离后，需要重置，数值要根据墙体资源设置，不然容易走光，哈哈\n        maxPosYInteval : {\n            default : -128.0,\n            type : cc.Float\n        },\n        // 底部背景移动距离\n        _bottomBGYInteval : {\n            default : 0.0,\n            type : cc.Float\n        },\n        // 是否可以移动底部背景\n        _bottomBGScroll : {\n            default : true,\n            type : cc.Boolean\n        },\n        // 英雄在左侧(-1)或者右侧(1)\n        _leftOrRight : {\n            default : -1,\n            type : cc.Integer\n        },\n        // todo : for test\n        _stopCreateEnemy : {\n            default : false,\n            type : cc.Boolean\n        }\n    },\n\n    //************************************start logic*************************************************//\n    /*\n    *  desc: get the speed of main scene at runtime\n    */\n    getRunSpeed : function(){\n        return this._runSpeed  \n    },\n    /*\n    *  desc: scroll side repeatedly\n    */\n    scrollSide : function(dt){\n        // deal with runing speed\n        this._runSpeed += this.accSpeed * dt\n        if(this._runSpeed < this.maxSpeed) {\n            this._runSpeed = this.maxSpeed\n        } \n\n        // deal with the BG\n        var offsetY = this._runSpeed * dt\n        this._posYInteval += offsetY;\n        if(this._posYInteval < this.maxPosYInteval) {\n            this._posYInteval -= this.maxPosYInteval\n            this.sideLeft.y -= this.maxPosYInteval      \n        }\n        this.sideLeft.y += offsetY\n        this.sideRight.y = this.sideLeft.y\n\n        // deal with the total distance and the score\n        this._distance += Math.abs(offsetY / 3.0)\n        this.scoreLabel.string = Math.floor(this._distance)\n    },\n    /*\n    *  desc: move the Bottom BG\n    */\n    moveBottomBG : function(dt) {\n        if(this._bottomBGScroll){\n            var offsetY = this._runSpeed * dt\n            this.bottomBG.y += offsetY\n\n            this._bottomBGYInteval += offsetY\n            // bottom bg can stop\n            if(Math.abs(this._bottomBGYInteval) > cc.director.getWinSize().height / 2.0)\n            {\n                this._bottomBGScroll = false\n                this._startEnemyDistance = this._distance\n            }\n        }\n    },\n    /*\n    *  desc: hero jump from oneside to another\n    */\n    heroJump : function(){\n        // change the side\n        this._leftOrRight *= (-1)\n        this.heroNode.getComponent(\"Hero\").setLeftOrRight(this._leftOrRight)\n        this.heroNode.getComponent(\"Hero\").jump()\n        var offsetX = this.rightHeroPosNode.x - this.leftHeroPosNode.x\n        offsetX *= this._leftOrRight \n        this.heroNode.getComponent(cc.Animation).play(\"HeroJumpClip\")\n\n        var moveAction = cc.moveBy(0.33, offsetX, 0)\n        var callfuncAction = cc.callFunc(\n            function(){\n                this.heroNode.scaleX *= (-1)\n                this.heroNode.getComponent(\"Hero\").run()\n                this.heroNode.getComponent(cc.Animation).play(\"HeroRunClip\")\n            }, this\n        )\n        var action = cc.sequence(moveAction, callfuncAction)\n        this.heroNode.runAction(action)\n    },\n    onMouseDown : function(event){\n\n    },\n    onMouseMove : function(event){\n\n    },\n    onMouseUp : function(event){\n\n    },\n    onTouchStart : function(event){\n        this.heroJump()\n    },\n    onTouchMove : function(event){\n\n    }, \n    onTouchEnd : function(event){\n\n    },\n    /*\n    *  desc: create enemy\n    */\n    createEnemy : function(dt){\n        // bottom bg must stop\n        if(this._bottomBGScroll || this._stopCreateEnemy){\n            return\n        }\n\n        this._enemyTimeInteval += dt\n        \n        var timeInteval = this._gameManager.getTimeIntevalWithDistance(this._distance - this._startEnemyDistance)\n        if(this._enemyTimeInteval >= timeInteval){\n            this._enemyTimeInteval -= timeInteval\n            var enemyInfo = this._gameManager.generateEnemy(this._distance - this._startEnemyDistance)\n            if(enemyInfo){\n                if(enemyInfo.type === Global.enemyType.bird) {\n                    this.dealWithBird(enemyInfo.enemyNode)\n                }else if(enemyInfo.type === Global.enemyType.dart2) {\n                    this.dealWithDartEnemy(enemyInfo.enemyNode)\n                }else if(enemyInfo.type === Global.enemyType.line){\n                    this.dealWithLine(enemyInfo.enemyNode)\n                }else if(enemyInfo.type === Global.enemyType.linecat){\n                    this.dealWithLineCat(enemyInfo.enemyNode)\n                }else if(enemyInfo.type === Global.enemyType.shortbarrier){\n                    this.dealWithShortBarrier(enemyInfo.enemyNode)\n                }else if(enemyInfo.type === Global.enemyType.longbarrier){\n                    this.dealWithLongBarrier(enemyInfo.enemyNode)\n                }else if(enemyInfo.type === Global.enemyType.enemyrun){\n                    this.dealWithRunEnemy(enemyInfo.enemyNode)\n                }else if(enemyInfo.type === Global.enemyType.circleprop){\n                    this.dealWithCircleProp(enemyInfo.enemyNode)\n                }\n                // todo : for test\n                this._stopCreateEnemy = false\n            }\n        }\n    },\n    /*\n    *  desc: dealWithBird\n    */\n    dealWithBird : function(birdNode){\n        birdNode.parent = (this._leftOrRight > 0) ? this.enemyNodeLeft : this.enemyNodeRight\n        var targetWorldPos = (this._leftOrRight > 0) ? this.rightHeroPosNode.convertToWorldSpace(cc.v2(0, 0)) : this.leftHeroPosNode.convertToWorldSpace(cc.v2(0, 0))\n        birdNode.scaleX *= this._leftOrRight\n        birdNode.getComponent(\"Bird\").setStartSide(-this._leftOrRight)\n        birdNode.getComponent(\"Bird\").setTargetWorldPos(targetWorldPos)\n    },\n    /*\n    *  desc: dealWithDartEnemy\n    */\n    dealWithDartEnemy : function(dartEnemyNode){\n        dartEnemyNode.parent = (this._leftOrRight > 0) ? this.enemyNodeLeft : this.enemyNodeRight\n        var targetWorldPos = (this._leftOrRight > 0) ? this.rightHeroPosNode.convertToWorldSpace(cc.v2(0, 0)) : this.leftHeroPosNode.convertToWorldSpace(cc.v2(0, 0))\n        dartEnemyNode.scaleX *= this._leftOrRight\n        dartEnemyNode.getComponent(\"DartEnemy\").setStartSide(-this._leftOrRight)\n        dartEnemyNode.getComponent(\"DartEnemy\").setTargetWorldPos(targetWorldPos)\n    },\n    /*\n    *  desc: dealWithLine\n    */\n    dealWithLine : function(lineEnemyNode){\n        lineEnemyNode.parent = this.enemyNodeLeft\n    },\n    /*\n    *  desc: dealWithLineCat\n    */\n    dealWithLineCat : function(linecatEnemyNode){\n        linecatEnemyNode.parent = this.enemyNodeLeft\n    },\n    /*\n    *  desc: dealWithShortBarrier\n    */\n    dealWithShortBarrier : function(shortBarrierNode){\n        shortBarrierNode.parent = (this._leftOrRight > 0) ? this.enemyNodeRight : this.enemyNodeLeft\n        shortBarrierNode.scaleX *= -this._leftOrRight\n    },\n    /*\n    *  desc: dealWithLongBarrier\n    */\n    dealWithLongBarrier : function(longBarrierNode){\n        longBarrierNode.parent = (this._leftOrRight > 0) ? this.enemyNodeRight : this.enemyNodeLeft\n        longBarrierNode.scaleX *= -this._leftOrRight\n    },\n    /*\n    *  desc: dealWithRunEnemy\n    */\n    dealWithRunEnemy : function(runEnemey){\n        runEnemey.parent = (this._leftOrRight > 0) ? this.enemyNodeRight : this.enemyNodeLeft\n        runEnemey.scaleX *= (-this._leftOrRight)\n    },\n\n    dealWithCircleProp : function(circleProp){\n        runEnemey.parent = (this._leftOrRight > 0) ? this.enemyNodeRight : this.enemyNodeLeft\n        runEnemey.scaleX *= (-this._leftOrRight)\n    },\n\n    /*\n    *  desc: gameOver\n    */\n    gameOver : function(){  \n        cc.director.loadScene(\"GameStartScene\")\n    },\n    //*******************************end logic******************************************************//\n\n    // LIFE-CYCLE CALLBACKS:\n    onLoad () {\n        Global.gameMainScene = this\n\n        this.node.on(cc.Node.EventType.MOUSE_DOWN, this.onMouseDown, this)\n        this.node.on(cc.Node.EventType.MOUSE_MOVE, this.onMouseMove, this)\n        this.node.on(cc.Node.EventType.MOUSE_UP, this.onMouseUp, this)\n\n        this.node.on(cc.Node.EventType.TOUCH_START, this.onTouchStart, this)\n        this.node.on(cc.Node.EventType.TOUCH_MOVE, this.onTouchMove, this)\n        this.node.on(cc.Node.EventType.TOUCH_END, this.onTouchEnd, this)\n\n        this.node.on(\"MSG_GameOver\", this.gameOver, this)\n\n        this._gameManager = this.getComponent(\"GameManager\")\n    },\n\n    start () {\n        this._leftOrRight = -1\n        this._distance = 0\n        this._enemyTimeInteval = 0.0\n    },\n\n    update (dt) {\n        this.scrollSide(dt)\n        this.moveBottomBG(dt)\n        this.createEnemy(dt)\n    },\n});\n"]}