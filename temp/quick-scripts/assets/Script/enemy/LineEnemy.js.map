{"version":3,"sources":["LineEnemy.js"],"names":["gameMainScene","Global","gameManager","cc","Class","extends","Component","properties","catNode","default","type","Node","String","onLoad","_cat","_totalOffsetY","start","update","dt","speed","getRunSpeed","offsetY","node","y","Math","abs","director","getWinSize","height","childrenCount","cat","getComponent","beKilled","addCat","addChild","stopAllActions","collectEnemy"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAIA,gBAAgBC,OAAOD,aAA3B;AACA,IAAIE,cAAcD,OAAOC,WAAzB;;AAEAC,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,iBAAU;AACNC,qBAAU,IADJ;AAENC,kBAAOP,GAAGQ;AAFJ,SADF;AAKRD,cAAO;AACHD,qBAAU,MADP;AAEHC,kBAAOP,GAAGS;AAFP;AALC,KAHP;;AAcL;;AAEAC,UAhBK,oBAgBK;AACN,aAAKC,IAAL,GAAY,IAAZ;AACA,aAAKC,aAAL,GAAqB,GAArB;AACH,KAnBI;AAqBLC,SArBK,mBAqBI,CAER,CAvBI;AAyBLC,UAzBK,kBAyBGC,EAzBH,EAyBO;AACR,YAAIC,QAAQnB,cAAcoB,WAAd,EAAZ;AACA,YAAIC,UAAUF,QAAQD,EAAtB;AACA,aAAKI,IAAL,CAAUC,CAAV,IAAeF,OAAf;AACA,aAAKN,aAAL,IAAsBM,OAAtB;;AAEA,YAAGG,KAAKC,GAAL,CAAS,KAAKV,aAAd,IAA+BZ,GAAGuB,QAAH,CAAYC,UAAZ,GAAyBC,MAAzB,GAAkC,GAApE,EAAwE;AACpE,gBAAG,KAAKpB,OAAL,CAAaqB,aAAb,GAA6B,CAAhC,EAAkC;AAC9B,qBAAKC,GAAL,CAASC,YAAT,CAAsB,UAAtB,EAAkCC,QAAlC;AACH;;AAED,iBAAKA,QAAL;AACH;AACJ,KAtCI;;;AAwCL;AACAC,YAAS,gBAASH,GAAT,EAAa;AAClB,YAAG,KAAKtB,OAAR,EAAgB;AACZ,iBAAKA,OAAL,CAAa0B,QAAb,CAAsBJ,GAAtB;AACH;AACD,aAAKhB,IAAL,GAAYgB,GAAZ;AACH,KA9CI;;AAgDLE,cAAW,oBAAU;AACjB,aAAKV,IAAL,CAAUa,cAAV;AACAjC,oBAAYkC,YAAZ,CAAyB,KAAKd,IAA9B,EAAoC,KAAKZ,IAAzC;AACH;AAnDI,CAAT","file":"LineEnemy.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\Script\\enemy","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\r\n\r\nvar gameMainScene = Global.gameMainScene\r\nvar gameManager = Global.gameManager\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        catNode : {\r\n            default : null,\r\n            type : cc.Node\r\n        },\r\n        type : {\r\n            default : \"line\",\r\n            type : cc.String\r\n        },\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () {\r\n        this._cat = null\r\n        this._totalOffsetY = 0.0\r\n    },\r\n\r\n    start () {\r\n        \r\n    },\r\n\r\n    update (dt) {\r\n        var speed = gameMainScene.getRunSpeed()\r\n        var offsetY = speed * dt\r\n        this.node.y += offsetY\r\n        this._totalOffsetY += offsetY\r\n\r\n        if(Math.abs(this._totalOffsetY) > cc.director.getWinSize().height * 1.5){\r\n            if(this.catNode.childrenCount > 0){\r\n                this.cat.getComponent(\"CatEnemy\").beKilled()\r\n            }\r\n\r\n            this.beKilled()\r\n        }\r\n    },\r\n\r\n    // logic\r\n    addCat : function(cat){\r\n        if(this.catNode){\r\n            this.catNode.addChild(cat)\r\n        }\r\n        this._cat = cat\r\n    },\r\n\r\n    beKilled : function(){\r\n        this.node.stopAllActions()\r\n        gameManager.collectEnemy(this.node, this.type)\r\n    },\r\n});\r\n"]}